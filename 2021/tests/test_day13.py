from day13 import _parse_input, fold, FoldDirection
from common.input import auto_read_input


def test__parse_input():
    ## Start here
    paper, instructions = _parse_input(auto_read_input())
    expected_paper = [
        [".", ".", ".", "#", ".", ".", "#", ".", ".", "#", "."],
        [".", ".", ".", ".", "#", ".", ".", ".", ".", ".", "."],
        [".", ".", ".", ".", ".", ".", ".", ".", ".", ".", "."],
        ["#", ".", ".", ".", ".", ".", ".", ".", ".", ".", "."],
        [".", ".", ".", "#", ".", ".", ".", ".", "#", ".", "#"],
        [".", ".", ".", ".", ".", ".", ".", ".", ".", ".", "."],
        [".", ".", ".", ".", ".", ".", ".", ".", ".", ".", "."],
        [".", ".", ".", ".", ".", ".", ".", ".", ".", ".", "."],
        [".", ".", ".", ".", ".", ".", ".", ".", ".", ".", "."],
        [".", ".", ".", ".", ".", ".", ".", ".", ".", ".", "."],
        [".", "#", ".", ".", ".", ".", "#", ".", "#", "#", "."],
        [".", ".", ".", ".", "#", ".", ".", ".", ".", ".", "."],
        [".", ".", ".", ".", ".", ".", "#", ".", ".", ".", "#"],
        ["#", ".", ".", ".", ".", ".", ".", ".", ".", ".", "."],
        ["#", ".", "#", ".", ".", ".", ".", ".", ".", ".", "."],
    ]
    expected_instructions = [(FoldDirection.UP, 7), (FoldDirection.LEFT, 5)]
    assert paper == expected_paper
    assert instructions == expected_instructions


def test_fold():
    paper, _ = _parse_input(auto_read_input())
    resulting_paper = fold(paper, (FoldDirection.UP, 7))
    expected_resulting_paper = [
        ["#", ".", "#", "#", ".", ".", "#", ".", ".", "#", "."],
        ["#", ".", ".", ".", "#", ".", ".", ".", ".", ".", "."],
        [".", ".", ".", ".", ".", ".", "#", ".", ".", ".", "#"],
        ["#", ".", ".", ".", "#", ".", ".", ".", ".", ".", "."],
        [".", "#", ".", "#", ".", ".", "#", ".", "#", "#", "#"],
        [".", ".", ".", ".", ".", ".", ".", ".", ".", ".", "."],
        [".", ".", ".", ".", ".", ".", ".", ".", ".", ".", "."],
    ]
    assert resulting_paper == expected_resulting_paper
    resulting_paper = fold(resulting_paper, (FoldDirection.LEFT, 5))
    expected_resulting_paper = [
        ["#", "#", "#", "#", "#"],
        ["#", ".", ".", ".", "#"],
        ["#", ".", ".", ".", "#"],
        ["#", ".", ".", ".", "#"],
        ["#", "#", "#", "#", "#"],
        [".", ".", ".", ".", "."],
        [".", ".", ".", ".", "."],
    ]
    assert resulting_paper == expected_resulting_paper
